<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Day 2 - Ex. 4</title>
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://icons8.com/icon/15126/car"
    />

    <link rel="stylesheet" href="styleCars.css" />
  </head>
  <body>
    <div class="container">
      <table id="myTable" class="table h-20">
        <thead id="header">
          <tr id="headers-cars">
            <th onclick="sortTable(0)" class="btn-link">ID</th>
            <th id="h-year" onclick="sortTable(1)" class="btn-link">Year</th>
            <th id="h-brand" onclick="sortTable(2)" class="btn-link">Brand</th>
            <th id="h-model" onclick="sortTable(3)" class="btn-link">Model</th>
            <th id="h-price" onclick="sortTable(4)" class="btn-link">Price</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <tr>
            <td>1</td>
            <td>2000</td>
            <td>Tesla</td>
            <td>Model Y</td>
            <td>5000</td>
          </tr>
        </tbody>
      </table>
      <div>
        <label for="filter-price">Price &nbsp;</label>
        <input id="filter-price" />
        <button id="btn-filter-price" class="btn btn-outline-dark">
          Price less than
        </button>
        <button id="btn-clear-filter" class="btn btn-outline-dark">
          Clear
        </button>
      </div>

      <div id="btn-back">
        <a href="/">Back</a>
      </div>
    </div>

    <script>
      const cars = [
        { id: 1, year: 1997, brand: "Ford", model: "E350", price: 3000 },
        { id: 2, year: 1999, brand: "Chevy", model: "Venture", price: 4900 },
        { id: 3, year: 2000, brand: "Chevy", model: "Venture", price: 5000 },
        {
          id: 4,
          year: 1996,
          brand: "Jeep",
          model: "Grand Cherokee",
          price: 4799,
        },
        { id: 5, year: 2005, brand: "Volvo", model: "V70", price: 44799 },
      ];

      /*HUSK: `` */
      function fetchAllCars(carsArray) {
        const tableRows = carsArray
          .map(
            (car) => `
                        <tr>
                          <td>${car.id}</td>
                          <td>${car.year}</td>
                          <td>${car.brand}</td>
                          <td>${car.model}</td>
                          <td>${car.price}</td>
                        </tr>
                        `
          )
          .join("\n");
        document.getElementById("tbody").innerHTML = tableRows;
      }

      fetchAllCars(cars);

      // Filter function
      document.getElementById("btn-filter-price").onclick = () => {
        const priceInput = document.getElementById("filter-price").value;
        const filteredCars = cars.filter((car) => car.price < priceInput);
        fetchAllCars(filteredCars);
      };

      // Removes the filter and makes a new list with all cars
      document.querySelector("#btn-clear-filter").onclick = function () {
        fetchAllCars(cars);
      };

      // Sorts by price
      document.querySelector("#h-price").onclick = () => {
        const sortedCarsByPrice = cars.sort((car1, car2) =>
          car1.price > car2.price ? 1 : -1
        );
        fetchAllCars(sortedCarsByPrice);
      };

      // Sorts by Brand
      document.querySelector("#h-brand").onclick = () => {
        const sortedCarsByBrand = cars.sort((car1, car2) =>
          car1.brand > car2.brand ? 1 : -1
        );
        fetchAllCars(sortedCarsByBrand);
      };

      // Sorts by Model
      document.querySelector("#h-model").onclick = () => {
        const sortedCarsByModel = cars.sort((car1, car2) =>
          car1.model > car2.model ? 1 : -1
        );
        fetchAllCars(sortedCarsByModel);
      };

      // Sorts by Year
      document.querySelector("#h-year").onclick = () => {
        const sortedCarsByYear = cars.sort((car1, car2) =>
          car1.year > car2.year ? 1 : -1
        );
        fetchAllCars(sortedCarsByYear);
      };
    </script>
  </body>
</html>
